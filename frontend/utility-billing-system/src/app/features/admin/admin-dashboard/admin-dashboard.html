<app-navbar></app-navbar>

<div class="dashboard-container">

  <h2>Admin Dashboard</h2>

  <!-- FILTER BAR -->
  <div class="filters">
    <select [(ngModel)]="month" (change)="onFilterChange()">
      <option *ngFor="let m of months" [value]="m.value">
        {{ m.name }}
      </option>
    </select>

    <select [(ngModel)]="year" (change)="onFilterChange()">
      <option *ngFor="let y of years" [value]="y">
        {{ y }}
      </option>
    </select>
  </div>

  <!-- SUMMARY CARDS -->
  <div class="cards">
    <div class="card">
      <h4>Monthly Revenue</h4>
      <p>₹ {{ revenueSummary?.totalRevenue || 0 }}</p>
    </div>

    <div class="card">
      <h4>Outstanding</h4>
      <p>₹ {{ outstandingSummary?.outstandingAmount || 0 }}</p>
    </div>

    <div class="card">
      <h4>Total Bills</h4>
      <p>{{ billsSummary?.totalBills || 0 }}</p>
    </div>

    <div class="card">
      <h4>Pending Requests</h4>
      <p>{{ pendingRequestsCount }}</p>
    </div>
  </div>

  <!-- DATA SECTIONS -->
  <div class="charts">

    <!-- CONSUMPTION -->
<div class="chart">
  <h4>Consumption by Utility</h4>

  <canvas
    *ngIf="consumptionChartData"
    baseChart
    [data]="consumptionChartData"
    [type]="'pie'">
  </canvas>

  <p *ngIf="!consumptionData.length" class="empty">
    No consumption data
  </p>
</div>

<!-- REVENUE BY MODE -->
<div class="chart">
  <h4>Revenue by Payment Mode</h4>

  <canvas
    *ngIf="revenueChartData"
    baseChart
    [data]="revenueChartData"
    [type]="'bar'">
  </canvas>

  <p *ngIf="!revenueByMode.length" class="empty">
    No revenue data
  </p>
</div>