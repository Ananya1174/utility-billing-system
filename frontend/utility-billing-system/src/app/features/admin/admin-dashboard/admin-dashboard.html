

<div class="dashboard-container">

  <h2>Admin Dashboard</h2>

  <!-- FILTER BAR -->
  <div class="filters">
    <select [(ngModel)]="month" (ngModelChange)="month = +$event; onFilterChange()">
  <option *ngFor="let m of months" [ngValue]="m.value">
    {{ m.name }}
  </option>
</select>

    <select [(ngModel)]="year" (change)="onFilterChange()">
      <option *ngFor="let y of years" [value]="y">
        {{ y }}
      </option>
    </select>
  </div>

  <!-- SUMMARY CARDS -->
  <div class="cards">
    <div class="card">
      <h4>Monthly Revenue</h4>
      <p>₹ {{ revenueSummary?.totalRevenue || 0 }}</p>
    </div>

    <div class="card">
  <h4>Outstanding ({{ selectedMonthName }} {{ year }})</h4>
  <p>₹ {{ monthlyOutstandingAmount }}</p>
</div>

    <div class="card">
      <h4>Paid Bills</h4>
      <p class="success">{{ billsSummary?.paidBills || 0 }}</p>
    </div>

    <div class="card">
      <h4>Unpaid Bills</h4>
      <p class="warning">{{ billsSummary?.unpaidBills || 0 }}</p>
    </div>
  </div>

  <!-- CHARTS -->
  <div class="charts">

    <!-- CONSUMPTION -->
    <div class="chart">
      <h4>Consumption by Utility</h4>
      <canvas
        *ngIf="consumptionChartData"
        baseChart
        [data]="consumptionChartData"
        [type]="'pie'">
      </canvas>
    </div>

    <!-- REVENUE BY MODE -->
    <div class="chart">
      <h4>Revenue by Payment Mode</h4>
      <canvas
        *ngIf="revenueChartData"
        baseChart
        [data]="revenueChartData"
        [type]="'bar'">
      </canvas>
    </div>

    <!-- MONTHLY OUTSTANDING -->
    <div class="chart wide">
      <h4>Monthly Outstanding Trend</h4>
      <canvas
        *ngIf="outstandingChartData"
        baseChart
        [data]="outstandingChartData"
        [type]="'line'">
      </canvas>
    </div>

  </div>
</div>