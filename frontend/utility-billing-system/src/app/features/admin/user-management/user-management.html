

<h2>User Management</h2>
<p class="subtitle">Manage all system users</p>

<div class="top-bar">
  <div class="tabs">
    <button (click)="setTab('ALL')" [class.active]="activeTab === 'ALL'">
      All Users
    </button>
    <button (click)="setTab('CONSUMER')" [class.active]="activeTab === 'CONSUMER'">
      Consumers
    </button>
    <button (click)="setTab('BILLING_OFFICER')" [class.active]="activeTab === 'BILLING_OFFICER'">
      Billing Officers
    </button>
    <button (click)="setTab('ACCOUNTS_OFFICER')" [class.active]="activeTab === 'ACCOUNTS_OFFICER'">
      Accounts Officers
    </button>
  </div>

  <div class="page-size">
    <label>Rows:</label>
    <select [(ngModel)]="itemsPerPage" (change)="onPageSizeChange()">
      <option [value]="10">10</option>
      <option [value]="25">25</option>
      <option [value]="50">50</option>
    </select>
  </div>
</div>

<table class="users-table">
  <thead>
    <tr>
      <th>User ID</th>
      <th>Username</th>
      <th>Email</th>
      <th>Role</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let user of paginatedUsers">
      <td class="mono">{{ user.userId }}</td>
      <td>{{ user.username }}</td>
      <td>{{ user.email }}</td>
      <td>{{ user.role }}</td>
      <td>
        <span
          [class.active]="user.status === 'ACTIVE'"
          [class.inactive]="user.status !== 'ACTIVE'">
          {{ user.status }}
        </span>
      </td>
      <td>
        <button
  *ngIf="user.status === 'ACTIVE'"
  class="delete-btn"
  (click)="openDeleteDialog(user.userId)">
  Delete
</button>
      </td>
    </tr>

    <tr *ngIf="filteredUsers.length === 0">
      <td colspan="6" class="empty">No users found</td>
    </tr>
  </tbody>
</table>

<div class="pagination" *ngIf="totalPages > 1">
  <button (click)="prevPage()" [disabled]="currentPage === 1">
    Prev
  </button>

  <button
    *ngFor="let page of pages"
    (click)="goToPage(page)"
    [class.active]="currentPage === page">
    {{ page }}
  </button>

  <button (click)="nextPage()" [disabled]="currentPage === totalPages">
    Next
  </button>
  
</div>
<app-confirm-dialog
  [visible]="confirmVisible"
  title="Delete User"
  message="Are you sure you want to delete this user? This action cannot be undone."
  confirmText="Delete"
  cancelText="Cancel"
  (confirm)="confirmDelete()"
  (cancel)="cancelDelete()">
</app-confirm-dialog>
