<div class="password-card">
  <h2>Change Password</h2>

  <form [formGroup]="form" (ngSubmit)="submit()">

    <!-- OLD PASSWORD -->
    <div class="form-group">
      <label>Old Password</label>
      <input
        type="password"
        formControlName="oldPassword"
        placeholder="Enter current password"
      />

      <small class="error"
        *ngIf="form.get('oldPassword')?.touched && form.get('oldPassword')?.invalid">
        Old password is required
      </small>
    </div>

    <!-- NEW PASSWORD -->
    <div class="form-group">
      <label>New Password</label>
      <input
        type="password"
        formControlName="newPassword"
        placeholder="Enter new password"
      />

      <!-- LIVE PASSWORD RULES (ONLY WHEN USER TYPES) -->
      <!-- LIVE PASSWORD RULES -->
<div class="rules" *ngIf="newPassword.length > 0">

  <p [class.valid]="hasMinLength()" [class.invalid]="!hasMinLength()">
    <span>{{ hasMinLength() ? '✔' : '✖' }}</span>
    Minimum 12 characters
  </p>

  <p [class.valid]="hasUppercase()" [class.invalid]="!hasUppercase()">
    <span>{{ hasUppercase() ? '✔' : '✖' }}</span>
    One uppercase letter
  </p>

  <p [class.valid]="hasLowercase()" [class.invalid]="!hasLowercase()">
    <span>{{ hasLowercase() ? '✔' : '✖' }}</span>
    One lowercase letter
  </p>

  <p [class.valid]="hasNumber()" [class.invalid]="!hasNumber()">
    <span>{{ hasNumber() ? '✔' : '✖' }}</span>
    One number
  </p>

  <p [class.valid]="hasSpecial()" [class.invalid]="!hasSpecial()">
    <span>{{ hasSpecial() ? '✔' : '✖' }}</span>
    One special character
  </p>

</div>

      <!-- OLD & NEW SAME ERROR -->
      <small class="error"
        *ngIf="form.get('newPassword')?.touched && !oldNewDifferent()">
        New password must be different from old password
      </small>
    </div>

    <!-- CONFIRM PASSWORD -->
    <div class="form-group">
      <label>Confirm New Password</label>
      <input
        type="password"
        formControlName="confirmPassword"
        placeholder="Re-enter new password"
      />

      <small class="error"
        *ngIf="form.get('confirmPassword')?.touched && !passwordsMatch()">
        Passwords do not match
      </small>
    </div>

    <!-- SUBMIT -->
    <button
      type="submit"
      [disabled]="!canSubmit()"
      class="primary-btn">
      Change Password
    </button>

  </form>
</div>